<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/group_7/studysage/ui/screens/HomeScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/group_7/studysage/ui/screens/HomeScreen.kt" />
              <option name="originalContent" value="package com.group_7.studysage.ui.screens&#10;&#10;import androidx.compose.animation.AnimatedVisibility&#10;import androidx.compose.animation.animateColorAsState&#10;import androidx.compose.animation.animateContentSize&#10;import androidx.compose.animation.core.animateFloatAsState&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.animation.fadeIn&#10;import androidx.compose.animation.fadeOut&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.offset&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.layout.size&#10;import androidx.compose.foundation.layout.width&#10;import androidx.compose.foundation.pager.HorizontalPager&#10;import androidx.compose.foundation.pager.rememberPagerState&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Book&#10;import androidx.compose.material.icons.filled.CheckCircle&#10;import androidx.compose.material.icons.filled.Groups&#10;import androidx.compose.material.icons.filled.MenuBook&#10;import androidx.compose.material.icons.filled.RadioButtonUnchecked&#10;import androidx.compose.material.icons.filled.Star&#10;import androidx.compose.material.icons.filled.Style&#10;import androidx.compose.material.icons.filled.SportsEsports&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Surface&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateListOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.alpha&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.draw.drawBehind&#10;import androidx.compose.ui.draw.scale&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.StrokeCap&#10;import androidx.compose.ui.graphics.drawscope.Stroke&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.text.style.TextDecoration&#10;import androidx.compose.ui.text.style.TextOverflow&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import androidx.navigation.NavController&#10;import com.group_7.studysage.ui.viewmodels.HomeViewModel&#10;&#10;// Data class as specified&#10;data class DailyTask(&#10;    val id: String,&#10;    val title: String,&#10;    val description: String,&#10;    val xpReward: Int,&#10;    val icon: ImageVector,&#10;    val isCompleted: Boolean = false&#10;)&#10;&#10;@OptIn(androidx.compose.foundation.ExperimentalFoundationApi::class)&#10;@Composable&#10;fun HomeScreen(&#10;    navController: NavController,&#10;    homeViewModel: HomeViewModel = viewModel(),&#10;    modifier: Modifier = Modifier&#10;) {&#10;    // Fetch user name from ViewModel (now comes from Firebase)&#10;    val userFullName by homeViewModel.userFullName&#10;    val isLoadingProfile by homeViewModel.isLoadingProfile&#10;&#10;    // Local state for tasks (start empty, load in LaunchedEffect)&#10;    val tasksState = remember { mutableStateListOf&lt;DailyTask&gt;() }&#10;&#10;    // Load sample daily tasks once&#10;    LaunchedEffect(Unit) {&#10;        val sample = listOf(&#10;            DailyTask(&#10;                id = &quot;1&quot;,&#10;                title = &quot;Complete a Quiz&quot;,&#10;                description = &quot;Test your knowledge&quot;,&#10;                xpReward = 25,&#10;                icon = Icons.Default.MenuBook&#10;            ),&#10;            DailyTask(&#10;                id = &quot;2&quot;,&#10;                title = &quot;Study for 30 mins&quot;,&#10;                description = &quot;Focus time&quot;,&#10;                xpReward = 50,&#10;                icon = Icons.Default.MenuBook&#10;            ),&#10;            DailyTask(&#10;                id = &quot;3&quot;,&#10;                title = &quot;Review Flashcards&quot;,&#10;                description = &quot;Memorize concepts&quot;,&#10;                xpReward = 30,&#10;                icon = Icons.Default.MenuBook&#10;            ),&#10;            DailyTask(&#10;                id = &quot;4&quot;,&#10;                title = &quot;Join Group Study&quot;,&#10;                description = &quot;Collaborate with peers&quot;,&#10;                xpReward = 40,&#10;                icon = Icons.Default.MenuBook&#10;            )&#10;        )&#10;        tasksState.clear()&#10;        tasksState.addAll(sample)&#10;    }&#10;&#10;    // Calculate stats&#10;    val completedTasksCount = tasksState.count { it.isCompleted }&#10;    val totalTasks = tasksState.size&#10;    val currentLevel = 5 // Mock data - replace with actual from ViewModel&#10;    val levelProgress = 0.65f // Mock data - 65% to next level&#10;&#10;    val pageCount = tasksState.size&#10;    val pagerState = rememberPagerState(pageCount = { pageCount })&#10;&#10;    // Dark gradient background matching website theme&#10;    Surface(&#10;        modifier = modifier.fillMaxSize(),&#10;        color = Color.Transparent&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(&#10;                    Brush.verticalGradient(&#10;                        colors = listOf(&#10;                            Color(0xFF2D1B4E),  // Lighter starting point&#10;                            Color(0xFF3D2B5E),  // Lighter ending point&#10;                            Color(0xFF2D1B4E)   // Back to starting for subtle variation&#10;                        )&#10;                    )&#10;                )&#10;        ) {&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .verticalScroll(rememberScrollState())&#10;                    .padding(16.dp)&#10;            ) {&#10;                // HEADER with improved typography&#10;                Row(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(top = 16.dp, bottom = 16.dp),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    // Left side - User greeting&#10;                    Column(&#10;                        modifier = Modifier.weight(1f)&#10;                    ) {&#10;                        // Show loading indicator or actual name with better typography&#10;                        if (isLoadingProfile) {&#10;                            Row(verticalAlignment = Alignment.CenterVertically) {&#10;                                CircularProgressIndicator(&#10;                                    modifier = Modifier.size(20.dp),&#10;                                    strokeWidth = 2.dp,&#10;                                    color = Color(0xFF9333EA)&#10;                                )&#10;                                Spacer(modifier = Modifier.width(8.dp))&#10;                                Text(&#10;                                    text = &quot;Loading...&quot;,&#10;                                    fontSize = 28.sp,&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    color = Color.White.copy(alpha = 0.5f)&#10;                                )&#10;                            }&#10;                        } else {&#10;                            // Professional &quot;Welcome back&quot; style&#10;                            Text(&#10;                                text = &quot;Welcome back&quot;,&#10;                                fontSize = 16.sp,&#10;                                color = Color(0xFFB0B0C0),&#10;                                fontWeight = FontWeight.Normal,&#10;                                letterSpacing = 0.8.sp&#10;                            )&#10;                            Spacer(modifier = Modifier.height(6.dp))&#10;                            Text(&#10;                                text = userFullName,&#10;                                fontSize = 32.sp,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White,&#10;                                letterSpacing = 0.sp,&#10;                                maxLines = 1,&#10;                                overflow = TextOverflow.Ellipsis&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.width(16.dp))&#10;&#10;                    // Avatar with updated purple theme&#10;                    Box(contentAlignment = Alignment.Center) {&#10;                        val animatedProgress by animateFloatAsState(&#10;                            targetValue = levelProgress,&#10;                            animationSpec = tween(1000),&#10;                            label = &quot;progress&quot;&#10;                        )&#10;&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .size(90.dp)&#10;                                .drawBehind {&#10;                                    // Background circle - dark purple track&#10;                                    drawCircle(&#10;                                        color = Color(0xFF4A3A5E).copy(alpha = 0.3f),&#10;                                        radius = size.minDimension / 2,&#10;                                        style = Stroke(width = 4.dp.toPx())&#10;                                    )&#10;                                    // Progress arc - vibrant purple&#10;                                    drawArc(&#10;                                        color = Color(0xFF9333EA),&#10;                                        startAngle = -90f,&#10;                                        sweepAngle = 360f * animatedProgress,&#10;                                        useCenter = false,&#10;                                        style = Stroke(&#10;                                            width = 4.dp.toPx(),&#10;                                            cap = StrokeCap.Round&#10;                                        )&#10;                                    )&#10;                                },&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            // Avatar - secondary purple background&#10;                            val firstInitial = userFullName.firstOrNull()?.uppercaseChar() ?: 'U'&#10;                            Box(&#10;                                modifier = Modifier&#10;                                    .size(76.dp)&#10;                                    .clip(CircleShape)&#10;                                    .background(Color(0xFF7C3AED))&#10;                                    .clickable { navController.navigate(&quot;profile&quot;) },&#10;                                contentAlignment = Alignment.Center&#10;                            ) {&#10;                                Text(&#10;                                    text = firstInitial.toString(),&#10;                                    color = Color.White,&#10;                                    fontSize = 32.sp,&#10;                                    fontWeight = FontWeight.Bold&#10;                                )&#10;                            }&#10;                        }&#10;&#10;                        // Level badge - gold/yellow&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .align(Alignment.BottomEnd)&#10;                                .offset(x = (-4).dp, y = (-4).dp)&#10;                                .size(28.dp)&#10;                                .clip(CircleShape)&#10;                                .background(Color(0xFFFBBF24))&#10;                                .padding(2.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            Text(&#10;                                text = currentLevel.toString(),&#10;                                color = Color.Black,&#10;                                fontSize = 12.sp,&#10;                                fontWeight = FontWeight.Bold&#10;                            )&#10;                        }&#10;                    }&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(24.dp))&#10;&#10;                // DAILY TASKS SECTION HEADER with updated colors&#10;                Row(&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Column {&#10;                        Text(&#10;                            text = &quot;Daily Tasks&quot;,&#10;                            fontSize = 24.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White&#10;                        )&#10;                        Text(&#10;                            text = &quot;Complete tasks to earn XP&quot;,&#10;                            fontSize = 13.sp,&#10;                            color = Color(0xFFB0B0C0)&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.width(16.dp))&#10;&#10;                    // Circular completion indicator with purple theme&#10;                    Box(contentAlignment = Alignment.Center) {&#10;                        val completionProgress = if (totalTasks &gt; 0) completedTasksCount.toFloat() / totalTasks else 0f&#10;                        val animatedCompletion by animateFloatAsState(&#10;                            targetValue = completionProgress,&#10;                            animationSpec = tween(800),&#10;                            label = &quot;completion&quot;&#10;                        )&#10;&#10;                        CircularProgressIndicator(&#10;                            progress = { animatedCompletion },&#10;                            modifier = Modifier.size(48.dp),&#10;                            color = Color(0xFF9333EA),&#10;                            strokeWidth = 4.dp,&#10;                            trackColor = Color(0xFF4A3A5E).copy(alpha = 0.3f),&#10;                        )&#10;                        Text(&#10;                            text = &quot;$completedTasksCount/$totalTasks&quot;,&#10;                            fontSize = 11.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color(0xFF9333EA)&#10;                        )&#10;                    }&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                // DAILY TASKS PAGER&#10;                if (pageCount &gt; 0) {&#10;                    Column {&#10;                        HorizontalPager(&#10;                            state = pagerState,&#10;                            modifier = Modifier&#10;                                .height(170.dp)&#10;                                .fillMaxWidth()&#10;                        ) { page -&gt;&#10;                            val task = tasksState[page]&#10;                            EnhancedTaskCard(&#10;                                task = task,&#10;                                onToggleCompleted = { toggled -&gt;&#10;                                    val index = tasksState.indexOfFirst { it.id == task.id }&#10;                                    if (index &gt;= 0) {&#10;                                        tasksState[index] = tasksState[index].copy(isCompleted = toggled)&#10;                                    }&#10;                                },&#10;                                modifier = Modifier&#10;                                    .padding(horizontal = 8.dp)&#10;                                    .fillMaxWidth()&#10;                            )&#10;                        }&#10;&#10;                        Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                        // Enhanced Pager Indicators with purple theme&#10;                        Row(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalArrangement = Arrangement.Center,&#10;                            verticalAlignment = Alignment.CenterVertically&#10;                        ) {&#10;                            repeat(pageCount) { index -&gt;&#10;                                val isSelected = pagerState.currentPage == index&#10;                                val width by animateFloatAsState(&#10;                                    targetValue = if (isSelected) 24f else 8f,&#10;                                    animationSpec = tween(300),&#10;                                    label = &quot;indicator_width&quot;&#10;                                )&#10;&#10;                                Box(&#10;                                    modifier = Modifier&#10;                                        .padding(horizontal = 4.dp)&#10;                                        .width(width.dp)&#10;                                        .height(8.dp)&#10;                                        .clip(RoundedCornerShape(4.dp))&#10;                                        .background(&#10;                                            if (isSelected) Color(0xFF9333EA)&#10;                                            else Color(0xFF4A3A5E).copy(alpha = 0.5f)&#10;                                        )&#10;                                        .animateContentSize()&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                } else {&#10;                    // Enhanced Empty State with dark theme&#10;                    Card(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .padding(vertical = 16.dp),&#10;                        shape = RoundedCornerShape(20.dp),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = Color(0xFF2D1B4E).copy(alpha = 0.6f)&#10;                        ),&#10;                        border = BorderStroke(1.dp, Color(0xFF9333EA).copy(alpha = 0.3f)),&#10;                        elevation = CardDefaults.cardElevation(defaultElevation = 0.dp)&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(32.dp),&#10;                            horizontalAlignment = Alignment.CenterHorizontally&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;&quot;,&#10;                                fontSize = 48.sp&#10;                            )&#10;                            Spacer(modifier = Modifier.height(8.dp))&#10;                            Text(&#10;                                text = &quot;All Done!&quot;,&#10;                                fontSize = 22.sp,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White&#10;                            )&#10;                            Spacer(modifier = Modifier.height(4.dp))&#10;                            Text(&#10;                                text = &quot;Great job completing today's tasks&quot;,&#10;                                fontSize = 14.sp,&#10;                                color = Color(0xFFB0B0C0),&#10;                                textAlign = TextAlign.Center&#10;                            )&#10;                        }&#10;                    }&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(24.dp))&#10;&#10;                // QUICK ACTIONS SECTION&#10;                Text(&#10;                    text = &quot;Quick Actions&quot;,&#10;                    fontSize = 20.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.White&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                // 2x2 Grid of quick actions with website colors&#10;                Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    Row(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                    ) {&#10;                        QuickActionButton(&#10;                            modifier = Modifier.weight(1f),&#10;                            icon = Icons.Default.Book,&#10;                            label = &quot;Take Quiz&quot;,&#10;                            backgroundColor = Color(0xFF9333EA),&#10;                            onClick = { /* Navigate to quiz */ }&#10;                        )&#10;                        QuickActionButton(&#10;                            modifier = Modifier.weight(1f),&#10;                            icon = Icons.Default.Style,&#10;                            label = &quot;Flashcards&quot;,&#10;                            backgroundColor = Color(0xFF7C3AED),&#10;                            onClick = { /* Navigate to flashcards */ }&#10;                        )&#10;                    }&#10;                    Row(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                    ) {&#10;                        QuickActionButton(&#10;                            modifier = Modifier.weight(1f),&#10;                            icon = Icons.Default.Groups,&#10;                            label = &quot;Study Groups&quot;,&#10;                            backgroundColor = Color(0xFFB794F6),&#10;                            onClick = { navController.navigate(&quot;groups&quot;) }&#10;                        )&#10;                        QuickActionButton(&#10;                            modifier = Modifier.weight(1f),&#10;                            icon = Icons.Default.SportsEsports,&#10;                            label = &quot;Games&quot;,&#10;                            backgroundColor = Color(0xFFA855F7),&#10;                            onClick = { /* Navigate to games */ }&#10;                        )&#10;                    }&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// Helper composable for stat items in the overview card&#10;@Composable&#10;private fun StatItem(&#10;    icon: ImageVector?,&#10;    value: String,&#10;    label: String,&#10;    iconTint: Color&#10;) {&#10;    Column(&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.Center&#10;    ) {&#10;        if (icon != null) {&#10;            Icon(&#10;                imageVector = icon,&#10;                contentDescription = null,&#10;                tint = iconTint,&#10;                modifier = Modifier.size(24.dp)&#10;            )&#10;            Spacer(modifier = Modifier.height(4.dp))&#10;        }&#10;        Text(&#10;            text = value,&#10;            fontSize = 18.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = MaterialTheme.colorScheme.onBackground&#10;        )&#10;        Text(&#10;            text = label,&#10;            fontSize = 11.sp,&#10;            color = Color.Gray&#10;        )&#10;    }&#10;}&#10;&#10;// Enhanced TaskCard with dark theme and website colors&#10;@Composable&#10;private fun EnhancedTaskCard(&#10;    task: DailyTask,&#10;    onToggleCompleted: (Boolean) -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    // Animate card alpha and elevation based on completion&#10;    val alpha by animateFloatAsState(&#10;        targetValue = if (task.isCompleted) 0.6f else 1f,&#10;        animationSpec = tween(300),&#10;        label = &quot;alpha&quot;&#10;    )&#10;&#10;    val elevation by animateFloatAsState(&#10;        targetValue = if (task.isCompleted) 1f else 4f,&#10;        animationSpec = tween(300),&#10;        label = &quot;elevation&quot;&#10;    )&#10;&#10;    AnimatedVisibility(&#10;        visible = true,&#10;        enter = fadeIn(),&#10;        exit = fadeOut()&#10;    ) {&#10;        Card(&#10;            modifier = modifier.alpha(alpha),&#10;            shape = RoundedCornerShape(20.dp),&#10;            elevation = CardDefaults.cardElevation(defaultElevation = elevation.dp),&#10;            colors = CardDefaults.cardColors(&#10;                containerColor = Color(0xFF2D1B4E).copy(alpha = 0.7f)&#10;            ),&#10;            border = BorderStroke(1.dp, Color(0xFF9333EA).copy(alpha = 0.3f))&#10;        ) {&#10;            Column(modifier = Modifier.padding(16.dp)) {&#10;                Row(&#10;                    verticalAlignment = Alignment.CenterVertically,&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    // Icon container with dark purple background&#10;                    Card(&#10;                        modifier = Modifier.size(60.dp),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = Color(0xFF3D2B5E)&#10;                        ),&#10;                        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;                    ) {&#10;                        Box(&#10;                            modifier = Modifier.fillMaxSize(),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            Icon(&#10;                                imageVector = task.icon,&#10;                                contentDescription = null,&#10;                                tint = Color(0xFF9333EA),&#10;                                modifier = Modifier.size(28.dp)&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.width(12.dp))&#10;&#10;                    // Title / description / xp&#10;                    Column(modifier = Modifier.weight(1f)) {&#10;                        Text(&#10;                            text = task.title,&#10;                            fontSize = 18.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White,&#10;                            maxLines = 1,&#10;                            overflow = TextOverflow.Ellipsis,&#10;                            textDecoration = if (task.isCompleted) TextDecoration.LineThrough else null&#10;                        )&#10;                        Spacer(modifier = Modifier.height(4.dp))&#10;                        Text(&#10;                            text = task.description,&#10;                            fontSize = 14.sp,&#10;                            color = Color(0xFFB0B0C0),&#10;                            maxLines = 1,&#10;                            overflow = TextOverflow.Ellipsis,&#10;                            textDecoration = if (task.isCompleted) TextDecoration.LineThrough else null&#10;                        )&#10;                        Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                        // XP Badge with gold theme&#10;                        Card(&#10;                            shape = RoundedCornerShape(12.dp),&#10;                            colors = CardDefaults.cardColors(&#10;                                containerColor = Color(0xFFFBBF24).copy(alpha = 0.2f)&#10;                            )&#10;                        ) {&#10;                            Row(&#10;                                modifier = Modifier.padding(horizontal = 8.dp, vertical = 4.dp),&#10;                                verticalAlignment = Alignment.CenterVertically&#10;                            ) {&#10;                                Icon(&#10;                                    imageVector = Icons.Default.Star,&#10;                                    contentDescription = null,&#10;                                    tint = Color(0xFFFBBF24),&#10;                                    modifier = Modifier.size(14.dp)&#10;                                )&#10;                                Spacer(modifier = Modifier.width(4.dp))&#10;                                Text(&#10;                                    text = &quot;+${task.xpReward} XP&quot;,&#10;                                    fontSize = 13.sp,&#10;                                    fontWeight = FontWeight.SemiBold,&#10;                                    color = Color(0xFFFBBF24)&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.width(12.dp))&#10;&#10;                    // Animated check icon with purple theme&#10;                    val scale by animateFloatAsState(&#10;                        targetValue = if (task.isCompleted) 1.1f else 1f,&#10;                        animationSpec = tween(200),&#10;                        label = &quot;scale&quot;&#10;                    )&#10;&#10;                    val iconColor by animateColorAsState(&#10;                        targetValue = if (task.isCompleted)&#10;                            Color(0xFF9333EA)&#10;                        else&#10;                            Color(0xFF9333EA).copy(alpha = 0.5f),&#10;                        animationSpec = tween(300),&#10;                        label = &quot;color&quot;&#10;                    )&#10;&#10;                    IconButton(&#10;                        onClick = { onToggleCompleted(!task.isCompleted) },&#10;                        modifier = Modifier.scale(scale)&#10;                    ) {&#10;                        Icon(&#10;                            imageVector = if (task.isCompleted)&#10;                                Icons.Default.CheckCircle&#10;                            else&#10;                                Icons.Default.RadioButtonUnchecked,&#10;                            contentDescription = if (task.isCompleted) &quot;Completed&quot; else &quot;Not completed&quot;,&#10;                            tint = iconColor,&#10;                            modifier = Modifier.size(32.dp)&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// Quick Action Button with dark theme and glassmorphism effect&#10;@Composable&#10;private fun QuickActionButton(&#10;    modifier: Modifier = Modifier,&#10;    icon: ImageVector,&#10;    label: String,&#10;    backgroundColor: Color,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    Card(&#10;        modifier = modifier.height(100.dp),&#10;        shape = RoundedCornerShape(20.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = backgroundColor.copy(alpha = 0.3f)&#10;        ),&#10;        border = BorderStroke(1.dp, backgroundColor.copy(alpha = 0.5f)),&#10;        onClick = onClick,&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 6.dp)&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(8.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Card(&#10;                modifier = Modifier.fillMaxSize(),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFF2D1B4E).copy(alpha = 0.6f)&#10;                ),&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 0.dp)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.Center&#10;                ) {&#10;                    Icon(&#10;                        imageVector = icon,&#10;                        contentDescription = null,&#10;                        tint = backgroundColor,&#10;                        modifier = Modifier.size(36.dp)&#10;                    )&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;                    Text(&#10;                        text = label,&#10;                        fontSize = 14.sp,&#10;                        fontWeight = FontWeight.SemiBold,&#10;                        color = Color.White,&#10;                        textAlign = TextAlign.Center,&#10;                        maxLines = 1,&#10;                        overflow = TextOverflow.Ellipsis&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.group_7.studysage.ui.screens&#10;&#10;import androidx.compose.animation.AnimatedVisibility&#10;import androidx.compose.animation.animateColorAsState&#10;import androidx.compose.animation.animateContentSize&#10;import androidx.compose.animation.core.animateFloatAsState&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.animation.fadeIn&#10;import androidx.compose.animation.fadeOut&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.offset&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.layout.size&#10;import androidx.compose.foundation.layout.width&#10;import androidx.compose.foundation.pager.HorizontalPager&#10;import androidx.compose.foundation.pager.rememberPagerState&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Book&#10;import androidx.compose.material.icons.filled.CheckCircle&#10;import androidx.compose.material.icons.filled.Groups&#10;import androidx.compose.material.icons.filled.MenuBook&#10;import androidx.compose.material.icons.filled.RadioButtonUnchecked&#10;import androidx.compose.material.icons.filled.Star&#10;import androidx.compose.material.icons.filled.Style&#10;import androidx.compose.material.icons.filled.SportsEsports&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Surface&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateListOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.alpha&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.draw.drawBehind&#10;import androidx.compose.ui.draw.scale&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.StrokeCap&#10;import androidx.compose.ui.graphics.drawscope.Stroke&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.text.style.TextDecoration&#10;import androidx.compose.ui.text.style.TextOverflow&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import androidx.navigation.NavController&#10;import coil.compose.rememberAsyncImagePainter&#10;import com.group_7.studysage.ui.viewmodels.HomeViewModel&#10;&#10;// Data class as specified&#10;data class DailyTask(&#10;    val id: String,&#10;    val title: String,&#10;    val description: String,&#10;    val xpReward: Int,&#10;    val icon: ImageVector,&#10;    val isCompleted: Boolean = false&#10;)&#10;&#10;@OptIn(androidx.compose.foundation.ExperimentalFoundationApi::class)&#10;@Composable&#10;fun HomeScreen(&#10;    navController: NavController,&#10;    homeViewModel: HomeViewModel = viewModel(),&#10;    modifier: Modifier = Modifier&#10;) {&#10;    // Fetch user name from ViewModel (now comes from Firebase)&#10;    val userFullName by homeViewModel.userFullName&#10;    val userProfile by homeViewModel.userProfile&#10;    val isLoadingProfile by homeViewModel.isLoadingProfile&#10;&#10;    // Local state for tasks (start empty, load in LaunchedEffect)&#10;    val tasksState = remember { mutableStateListOf&lt;DailyTask&gt;() }&#10;&#10;    // Load sample daily tasks once&#10;    LaunchedEffect(Unit) {&#10;        val sample = listOf(&#10;            DailyTask(&#10;                id = &quot;1&quot;,&#10;                title = &quot;Complete a Quiz&quot;,&#10;                description = &quot;Test your knowledge&quot;,&#10;                xpReward = 25,&#10;                icon = Icons.Default.MenuBook&#10;            ),&#10;            DailyTask(&#10;                id = &quot;2&quot;,&#10;                title = &quot;Study for 30 mins&quot;,&#10;                description = &quot;Focus time&quot;,&#10;                xpReward = 50,&#10;                icon = Icons.Default.MenuBook&#10;            ),&#10;            DailyTask(&#10;                id = &quot;3&quot;,&#10;                title = &quot;Review Flashcards&quot;,&#10;                description = &quot;Memorize concepts&quot;,&#10;                xpReward = 30,&#10;                icon = Icons.Default.MenuBook&#10;            ),&#10;            DailyTask(&#10;                id = &quot;4&quot;,&#10;                title = &quot;Join Group Study&quot;,&#10;                description = &quot;Collaborate with peers&quot;,&#10;                xpReward = 40,&#10;                icon = Icons.Default.MenuBook&#10;            )&#10;        )&#10;        tasksState.clear()&#10;        tasksState.addAll(sample)&#10;    }&#10;&#10;    // Calculate stats&#10;    val completedTasksCount = tasksState.count { it.isCompleted }&#10;    val totalTasks = tasksState.size&#10;    val currentLevel = 5 // Mock data - replace with actual from ViewModel&#10;    val levelProgress = 0.65f // Mock data - 65% to next level&#10;&#10;    val pageCount = tasksState.size&#10;    val pagerState = rememberPagerState(pageCount = { pageCount })&#10;&#10;    // Dark gradient background matching website theme&#10;    Surface(&#10;        modifier = modifier.fillMaxSize(),&#10;        color = Color.Transparent&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(&#10;                    Brush.verticalGradient(&#10;                        colors = listOf(&#10;                            Color(0xFF2D1B4E),  // Lighter starting point&#10;                            Color(0xFF3D2B5E),  // Lighter ending point&#10;                            Color(0xFF2D1B4E)   // Back to starting for subtle variation&#10;                        )&#10;                    )&#10;                )&#10;        ) {&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .verticalScroll(rememberScrollState())&#10;                    .padding(16.dp)&#10;            ) {&#10;                // HEADER with improved typography&#10;                Row(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(top = 16.dp, bottom = 16.dp),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    // Left side - User greeting&#10;                    Column(&#10;                        modifier = Modifier.weight(1f)&#10;                    ) {&#10;                        // Show loading indicator or actual name with better typography&#10;                        if (isLoadingProfile) {&#10;                            Row(verticalAlignment = Alignment.CenterVertically) {&#10;                                CircularProgressIndicator(&#10;                                    modifier = Modifier.size(20.dp),&#10;                                    strokeWidth = 2.dp,&#10;                                    color = Color(0xFF9333EA)&#10;                                )&#10;                                Spacer(modifier = Modifier.width(8.dp))&#10;                                Text(&#10;                                    text = &quot;Loading...&quot;,&#10;                                    fontSize = 28.sp,&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    color = Color.White.copy(alpha = 0.5f)&#10;                                )&#10;                            }&#10;                        } else {&#10;                            // Professional &quot;Welcome back&quot; style&#10;                            Text(&#10;                                text = &quot;Welcome back&quot;,&#10;                                fontSize = 16.sp,&#10;                                color = Color(0xFFB0B0C0),&#10;                                fontWeight = FontWeight.Normal,&#10;                                letterSpacing = 0.8.sp&#10;                            )&#10;                            Spacer(modifier = Modifier.height(6.dp))&#10;                            Text(&#10;                                text = userFullName,&#10;                                fontSize = 32.sp,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White,&#10;                                letterSpacing = 0.sp,&#10;                                maxLines = 1,&#10;                                overflow = TextOverflow.Ellipsis&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.width(16.dp))&#10;&#10;                    // Right side - Clean Avatar (matching ProfileScreen)&#10;                    Box(&#10;                        contentAlignment = Alignment.Center,&#10;                        modifier = Modifier.clickable { navController.navigate(&quot;profile&quot;) }&#10;                    ) {&#10;                        val profileImage = userProfile?.get(&quot;profileImageUrl&quot;) as? String&#10;                        val firstInitial = userFullName.firstOrNull()?.uppercaseChar() ?: 'U'&#10;                        &#10;                        if (!profileImage.isNullOrBlank()) {&#10;                            // Profile image with purple border&#10;                            Image(&#10;                                painter = rememberAsyncImagePainter(profileImage),&#10;                                contentDescription = &quot;Profile Picture&quot;,&#10;                                modifier = Modifier&#10;                                    .size(80.dp)&#10;                                    .clip(CircleShape)&#10;                                    .border(4.dp, Color(0xFF9333EA), CircleShape),&#10;                                contentScale = ContentScale.Crop&#10;                            )&#10;                        } else {&#10;                            // Letter avatar with purple border (matching ProfileScreen)&#10;                            Box(&#10;                                modifier = Modifier&#10;                                    .size(80.dp)&#10;                                    .clip(CircleShape)&#10;                                    .background(Color.White)&#10;                                    .border(4.dp, Color(0xFF9333EA), CircleShape),&#10;                                contentAlignment = Alignment.Center&#10;                            ) {&#10;                                Text(&#10;                                    text = firstInitial.toString(),&#10;                                    color = Color(0xFF9333EA),&#10;                                    fontSize = 32.sp,&#10;                                    fontWeight = FontWeight.Bold&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(24.dp))&#10;&#10;                // DAILY TASKS SECTION HEADER with updated colors&#10;                Row(&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Column {&#10;                        Text(&#10;                            text = &quot;Daily Tasks&quot;,&#10;                            fontSize = 24.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White&#10;                        )&#10;                        Text(&#10;                            text = &quot;Complete tasks to earn XP&quot;,&#10;                            fontSize = 13.sp,&#10;                            color = Color(0xFFB0B0C0)&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.width(16.dp))&#10;&#10;                    // Circular completion indicator with purple theme&#10;                    Box(contentAlignment = Alignment.Center) {&#10;                        val completionProgress = if (totalTasks &gt; 0) completedTasksCount.toFloat() / totalTasks else 0f&#10;                        val animatedCompletion by animateFloatAsState(&#10;                            targetValue = completionProgress,&#10;                            animationSpec = tween(800),&#10;                            label = &quot;completion&quot;&#10;                        )&#10;&#10;                        CircularProgressIndicator(&#10;                            progress = { animatedCompletion },&#10;                            modifier = Modifier.size(48.dp),&#10;                            color = Color(0xFF9333EA),&#10;                            strokeWidth = 4.dp,&#10;                            trackColor = Color(0xFF4A3A5E).copy(alpha = 0.3f),&#10;                        )&#10;                        Text(&#10;                            text = &quot;$completedTasksCount/$totalTasks&quot;,&#10;                            fontSize = 11.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color(0xFF9333EA)&#10;                        )&#10;                    }&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                // DAILY TASKS PAGER&#10;                if (pageCount &gt; 0) {&#10;                    Column {&#10;                        HorizontalPager(&#10;                            state = pagerState,&#10;                            modifier = Modifier&#10;                                .height(170.dp)&#10;                                .fillMaxWidth()&#10;                        ) { page -&gt;&#10;                            val task = tasksState[page]&#10;                            EnhancedTaskCard(&#10;                                task = task,&#10;                                onToggleCompleted = { toggled -&gt;&#10;                                    val index = tasksState.indexOfFirst { it.id == task.id }&#10;                                    if (index &gt;= 0) {&#10;                                        tasksState[index] = tasksState[index].copy(isCompleted = toggled)&#10;                                    }&#10;                                },&#10;                                modifier = Modifier&#10;                                    .padding(horizontal = 8.dp)&#10;                                    .fillMaxWidth()&#10;                            )&#10;                        }&#10;&#10;                        Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                        // Enhanced Pager Indicators with purple theme&#10;                        Row(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalArrangement = Arrangement.Center,&#10;                            verticalAlignment = Alignment.CenterVertically&#10;                        ) {&#10;                            repeat(pageCount) { index -&gt;&#10;                                val isSelected = pagerState.currentPage == index&#10;                                val width by animateFloatAsState(&#10;                                    targetValue = if (isSelected) 24f else 8f,&#10;                                    animationSpec = tween(300),&#10;                                    label = &quot;indicator_width&quot;&#10;                                )&#10;&#10;                                Box(&#10;                                    modifier = Modifier&#10;                                        .padding(horizontal = 4.dp)&#10;                                        .width(width.dp)&#10;                                        .height(8.dp)&#10;                                        .clip(RoundedCornerShape(4.dp))&#10;                                        .background(&#10;                                            if (isSelected) Color(0xFF9333EA)&#10;                                            else Color(0xFF4A3A5E).copy(alpha = 0.5f)&#10;                                        )&#10;                                        .animateContentSize()&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                } else {&#10;                    // Enhanced Empty State with dark theme&#10;                    Card(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .padding(vertical = 16.dp),&#10;                        shape = RoundedCornerShape(20.dp),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = Color(0xFF2D1B4E).copy(alpha = 0.6f)&#10;                        ),&#10;                        border = BorderStroke(1.dp, Color(0xFF9333EA).copy(alpha = 0.3f)),&#10;                        elevation = CardDefaults.cardElevation(defaultElevation = 0.dp)&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(32.dp),&#10;                            horizontalAlignment = Alignment.CenterHorizontally&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;&quot;,&#10;                                fontSize = 48.sp&#10;                            )&#10;                            Spacer(modifier = Modifier.height(8.dp))&#10;                            Text(&#10;                                text = &quot;All Done!&quot;,&#10;                                fontSize = 22.sp,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White&#10;                            )&#10;                            Spacer(modifier = Modifier.height(4.dp))&#10;                            Text(&#10;                                text = &quot;Great job completing today's tasks&quot;,&#10;                                fontSize = 14.sp,&#10;                                color = Color(0xFFB0B0C0),&#10;                                textAlign = TextAlign.Center&#10;                            )&#10;                        }&#10;                    }&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(24.dp))&#10;&#10;                // QUICK ACTIONS SECTION&#10;                Text(&#10;                    text = &quot;Quick Actions&quot;,&#10;                    fontSize = 20.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.White&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                // 2x2 Grid of quick actions with website colors&#10;                Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    Row(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                    ) {&#10;                        QuickActionButton(&#10;                            modifier = Modifier.weight(1f),&#10;                            icon = Icons.Default.Book,&#10;                            label = &quot;Take Quiz&quot;,&#10;                            backgroundColor = Color(0xFF9333EA),&#10;                            onClick = { /* Navigate to quiz */ }&#10;                        )&#10;                        QuickActionButton(&#10;                            modifier = Modifier.weight(1f),&#10;                            icon = Icons.Default.Style,&#10;                            label = &quot;Flashcards&quot;,&#10;                            backgroundColor = Color(0xFF7C3AED),&#10;                            onClick = { /* Navigate to flashcards */ }&#10;                        )&#10;                    }&#10;                    Row(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                    ) {&#10;                        QuickActionButton(&#10;                            modifier = Modifier.weight(1f),&#10;                            icon = Icons.Default.Groups,&#10;                            label = &quot;Study Groups&quot;,&#10;                            backgroundColor = Color(0xFFB794F6),&#10;                            onClick = { navController.navigate(&quot;groups&quot;) }&#10;                        )&#10;                        QuickActionButton(&#10;                            modifier = Modifier.weight(1f),&#10;                            icon = Icons.Default.SportsEsports,&#10;                            label = &quot;Games&quot;,&#10;                            backgroundColor = Color(0xFFA855F7),&#10;                            onClick = { /* Navigate to games */ }&#10;                        )&#10;                    }&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// Helper composable for stat items in the overview card&#10;@Composable&#10;private fun StatItem(&#10;    icon: ImageVector?,&#10;    value: String,&#10;    label: String,&#10;    iconTint: Color&#10;) {&#10;    Column(&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.Center&#10;    ) {&#10;        if (icon != null) {&#10;            Icon(&#10;                imageVector = icon,&#10;                contentDescription = null,&#10;                tint = iconTint,&#10;                modifier = Modifier.size(24.dp)&#10;            )&#10;            Spacer(modifier = Modifier.height(4.dp))&#10;        }&#10;        Text(&#10;            text = value,&#10;            fontSize = 18.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = MaterialTheme.colorScheme.onBackground&#10;        )&#10;        Text(&#10;            text = label,&#10;            fontSize = 11.sp,&#10;            color = Color.Gray&#10;        )&#10;    }&#10;}&#10;&#10;// Enhanced TaskCard with dark theme and website colors&#10;@Composable&#10;private fun EnhancedTaskCard(&#10;    task: DailyTask,&#10;    onToggleCompleted: (Boolean) -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    // Animate card alpha and elevation based on completion&#10;    val alpha by animateFloatAsState(&#10;        targetValue = if (task.isCompleted) 0.6f else 1f,&#10;        animationSpec = tween(300),&#10;        label = &quot;alpha&quot;&#10;    )&#10;&#10;    val elevation by animateFloatAsState(&#10;        targetValue = if (task.isCompleted) 1f else 4f,&#10;        animationSpec = tween(300),&#10;        label = &quot;elevation&quot;&#10;    )&#10;&#10;    AnimatedVisibility(&#10;        visible = true,&#10;        enter = fadeIn(),&#10;        exit = fadeOut()&#10;    ) {&#10;        Card(&#10;            modifier = modifier.alpha(alpha),&#10;            shape = RoundedCornerShape(20.dp),&#10;            elevation = CardDefaults.cardElevation(defaultElevation = elevation.dp),&#10;            colors = CardDefaults.cardColors(&#10;                containerColor = Color(0xFF2D1B4E).copy(alpha = 0.7f)&#10;            ),&#10;            border = BorderStroke(1.dp, Color(0xFF9333EA).copy(alpha = 0.3f))&#10;        ) {&#10;            Column(modifier = Modifier.padding(16.dp)) {&#10;                Row(&#10;                    verticalAlignment = Alignment.CenterVertically,&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    // Icon container with dark purple background&#10;                    Card(&#10;                        modifier = Modifier.size(60.dp),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = Color(0xFF3D2B5E)&#10;                        ),&#10;                        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;                    ) {&#10;                        Box(&#10;                            modifier = Modifier.fillMaxSize(),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            Icon(&#10;                                imageVector = task.icon,&#10;                                contentDescription = null,&#10;                                tint = Color(0xFF9333EA),&#10;                                modifier = Modifier.size(28.dp)&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.width(12.dp))&#10;&#10;                    // Title / description / xp&#10;                    Column(modifier = Modifier.weight(1f)) {&#10;                        Text(&#10;                            text = task.title,&#10;                            fontSize = 18.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White,&#10;                            maxLines = 1,&#10;                            overflow = TextOverflow.Ellipsis,&#10;                            textDecoration = if (task.isCompleted) TextDecoration.LineThrough else null&#10;                        )&#10;                        Spacer(modifier = Modifier.height(4.dp))&#10;                        Text(&#10;                            text = task.description,&#10;                            fontSize = 14.sp,&#10;                            color = Color(0xFFB0B0C0),&#10;                            maxLines = 1,&#10;                            overflow = TextOverflow.Ellipsis,&#10;                            textDecoration = if (task.isCompleted) TextDecoration.LineThrough else null&#10;                        )&#10;                        Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                        // XP Badge with gold theme&#10;                        Card(&#10;                            shape = RoundedCornerShape(12.dp),&#10;                            colors = CardDefaults.cardColors(&#10;                                containerColor = Color(0xFFFBBF24).copy(alpha = 0.2f)&#10;                            )&#10;                        ) {&#10;                            Row(&#10;                                modifier = Modifier.padding(horizontal = 8.dp, vertical = 4.dp),&#10;                                verticalAlignment = Alignment.CenterVertically&#10;                            ) {&#10;                                Icon(&#10;                                    imageVector = Icons.Default.Star,&#10;                                    contentDescription = null,&#10;                                    tint = Color(0xFFFBBF24),&#10;                                    modifier = Modifier.size(14.dp)&#10;                                )&#10;                                Spacer(modifier = Modifier.width(4.dp))&#10;                                Text(&#10;                                    text = &quot;+${task.xpReward} XP&quot;,&#10;                                    fontSize = 13.sp,&#10;                                    fontWeight = FontWeight.SemiBold,&#10;                                    color = Color(0xFFFBBF24)&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.width(12.dp))&#10;&#10;                    // Animated check icon with purple theme&#10;                    val scale by animateFloatAsState(&#10;                        targetValue = if (task.isCompleted) 1.1f else 1f,&#10;                        animationSpec = tween(200),&#10;                        label = &quot;scale&quot;&#10;                    )&#10;&#10;                    val iconColor by animateColorAsState(&#10;                        targetValue = if (task.isCompleted)&#10;                            Color(0xFF9333EA)&#10;                        else&#10;                            Color(0xFF9333EA).copy(alpha = 0.5f),&#10;                        animationSpec = tween(300),&#10;                        label = &quot;color&quot;&#10;                    )&#10;&#10;                    IconButton(&#10;                        onClick = { onToggleCompleted(!task.isCompleted) },&#10;                        modifier = Modifier.scale(scale)&#10;                    ) {&#10;                        Icon(&#10;                            imageVector = if (task.isCompleted)&#10;                                Icons.Default.CheckCircle&#10;                            else&#10;                                Icons.Default.RadioButtonUnchecked,&#10;                            contentDescription = if (task.isCompleted) &quot;Completed&quot; else &quot;Not completed&quot;,&#10;                            tint = iconColor,&#10;                            modifier = Modifier.size(32.dp)&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// Quick Action Button with dark theme and glassmorphism effect&#10;@Composable&#10;private fun QuickActionButton(&#10;    modifier: Modifier = Modifier,&#10;    icon: ImageVector,&#10;    label: String,&#10;    backgroundColor: Color,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    Card(&#10;        modifier = modifier.height(100.dp),&#10;        shape = RoundedCornerShape(20.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = backgroundColor.copy(alpha = 0.3f)&#10;        ),&#10;        border = BorderStroke(1.dp, backgroundColor.copy(alpha = 0.5f)),&#10;        onClick = onClick,&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 6.dp)&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(8.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Card(&#10;                modifier = Modifier.fillMaxSize(),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFF2D1B4E).copy(alpha = 0.6f)&#10;                ),&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 0.dp)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.Center&#10;                ) {&#10;                    Icon(&#10;                        imageVector = icon,&#10;                        contentDescription = null,&#10;                        tint = backgroundColor,&#10;                        modifier = Modifier.size(36.dp)&#10;                    )&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;                    Text(&#10;                        text = label,&#10;                        fontSize = 14.sp,&#10;                        fontWeight = FontWeight.SemiBold,&#10;                        color = Color.White,&#10;                        textAlign = TextAlign.Center,&#10;                        maxLines = 1,&#10;                        overflow = TextOverflow.Ellipsis&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/group_7/studysage/ui/screens/viewmodels/HomeViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/group_7/studysage/ui/screens/viewmodels/HomeViewModel.kt" />
              <option name="originalContent" value="package com.group_7.studysage.ui.viewmodels&#10;&#10;import android.content.Context&#10;import android.net.Uri&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import kotlinx.coroutines.launch&#10;import androidx.compose.runtime.State&#10;import com.group_7.studysage.data.repository.NotesRepository&#10;import com.group_7.studysage.data.repository.Note&#10;import com.group_7.studysage.data.repository.AuthRepository&#10;&#10;class HomeViewModel(&#10;    private val notesRepository: NotesRepository = NotesRepository(),&#10;    private val authRepository: AuthRepository = AuthRepository()&#10;) : ViewModel() {&#10;&#10;    private val _isLoading = mutableStateOf(false)&#10;    val isLoading: State&lt;Boolean&gt; = _isLoading&#10;&#10;    private val _uploadStatus = mutableStateOf&lt;String?&gt;(null)&#10;    val uploadStatus: State&lt;String?&gt; = _uploadStatus&#10;&#10;    private val _errorMessage = mutableStateOf&lt;String?&gt;(null)&#10;    val errorMessage: State&lt;String?&gt; = _errorMessage&#10;&#10;    private val _processedNote = mutableStateOf&lt;Note?&gt;(null)&#10;    val processedNote: State&lt;Note?&gt; = _processedNote&#10;&#10;    private val _recentNotes = mutableStateOf&lt;List&lt;Note&gt;&gt;(emptyList())&#10;    val recentNotes: State&lt;List&lt;Note&gt;&gt; = _recentNotes&#10;&#10;    private val _testResult = mutableStateOf&lt;String?&gt;(null)&#10;    val testResult: State&lt;String?&gt; = _testResult&#10;&#10;    // Fetch user full name from Firebase Firestore&#10;    private val _userFullName = mutableStateOf(&quot;User&quot;)&#10;    val userFullName: State&lt;String&gt; = _userFullName&#10;&#10;    private val _isLoadingProfile = mutableStateOf(true)&#10;    val isLoadingProfile: State&lt;Boolean&gt; = _isLoadingProfile&#10;&#10;    init {&#10;        loadRecentNotes()&#10;        loadUserProfile()&#10;    }&#10;&#10;    // Load user profile from Firestore&#10;    private fun loadUserProfile() {&#10;        viewModelScope.launch {&#10;            _isLoadingProfile.value = true&#10;            try {&#10;                val profile = authRepository.getUserProfile()&#10;                _userFullName.value = (profile?.get(&quot;name&quot;) as? String) ?: &quot;User&quot;&#10;            } catch (e: Exception) {&#10;                _userFullName.value = &quot;User&quot;&#10;                _errorMessage.value = &quot;Failed to load profile&quot;&#10;            } finally {&#10;                _isLoadingProfile.value = false&#10;            }&#10;        }&#10;    }&#10;&#10;    // Public method to refresh user name&#10;    fun refreshUserProfile() {&#10;        loadUserProfile()&#10;    }&#10;&#10;    fun uploadAndProcessNote(context: Context, uri: Uri, fileName: String) {&#10;        viewModelScope.launch {&#10;            _isLoading.value = true&#10;            _errorMessage.value = null&#10;            clearMessages()&#10;&#10;            try {&#10;                // Validate file type&#10;                val supportedTypes = listOf(&quot;.pdf&quot;, &quot;.txt&quot;, &quot;.doc&quot;, &quot;.docx&quot;, &quot;.md&quot;, &quot;.rtf&quot;)&#10;                val isSupported = supportedTypes.any { fileName.endsWith(it, ignoreCase = true) }&#10;&#10;                if (!isSupported) {&#10;                    _errorMessage.value = &quot;Unsupported file type. Please upload PDF, TXT, DOC, or DOCX files.&quot;&#10;                    _isLoading.value = false&#10;                    return@launch&#10;                }&#10;&#10;                // Check file size (limit to 10MB). Use `use` so the InputStream is closed after reading.&#10;                val fileSize = context.contentResolver.openInputStream(uri)?.use { it.available() } ?: 0&#10;                if (fileSize &gt; 10 * 1024 * 1024) { // 10MB limit&#10;                    _errorMessage.value = &quot;File too large. Please upload files smaller than 10MB.&quot;&#10;                    _isLoading.value = false&#10;                    return@launch&#10;                }&#10;&#10;                val result = notesRepository.uploadNotesAndProcess(&#10;                    context = context,&#10;                    uri = uri,&#10;                    fileName = fileName,&#10;                    onProgress = { status -&gt;&#10;                        _uploadStatus.value = status&#10;                    }&#10;                )&#10;&#10;                result.onSuccess { note -&gt;&#10;                    _processedNote.value = note&#10;                    _uploadStatus.value = &quot;Document processed successfully!&quot;&#10;                    loadRecentNotes() // Refresh the notes list&#10;                }.onFailure { exception -&gt;&#10;                    val errorMsg = when {&#10;                        exception.message?.contains(&quot;authentication&quot;, ignoreCase = true) == true -&gt;&#10;                            &quot;Please sign in to upload files&quot;&#10;                        exception.message?.contains(&quot;network&quot;, ignoreCase = true) == true -&gt;&#10;                            &quot;Network error. Please check your connection&quot;&#10;                        exception.message?.contains(&quot;API&quot;, ignoreCase = true) == true -&gt;&#10;                            &quot;AI processing temporarily unavailable. Please try again&quot;&#10;                        exception.message?.contains(&quot;PDF&quot;, ignoreCase = true) == true -&gt;&#10;                            &quot;PDF processing failed. Please try a different file&quot;&#10;                        else -&gt; &quot;Error processing file: ${exception.message}&quot;&#10;                    }&#10;                    _errorMessage.value = errorMsg&#10;                }&#10;&#10;            } catch (e: Exception) {&#10;                _errorMessage.value = &quot;Unexpected error: ${e.message}&quot;&#10;            }&#10;&#10;            _isLoading.value = false&#10;        }&#10;    }&#10;&#10;    private fun loadRecentNotes() {&#10;        viewModelScope.launch {&#10;            try {&#10;                val notes = notesRepository.getUserNotes()&#10;                _recentNotes.value = notes.take(5) // Show only last 5 notes&#10;            } catch (e: Exception) {&#10;                // Handle error silently for now, or show a subtle error&#10;                _errorMessage.value = &quot;Failed to load recent notes&quot;&#10;            }&#10;        }&#10;    }&#10;&#10;    fun refreshNotes() {&#10;        loadRecentNotes()&#10;    }&#10;&#10;    fun clearMessages() {&#10;        _uploadStatus.value = null&#10;        _errorMessage.value = null&#10;    }&#10;&#10;    fun clearProcessedNote() {&#10;        _processedNote.value = null&#10;    }&#10;&#10;    fun clearError() {&#10;        _errorMessage.value = null&#10;    }&#10;&#10;    // Test connectivity methods (optional)&#10;    fun testAIConnection() {&#10;        viewModelScope.launch {&#10;            _isLoading.value = true&#10;            _testResult.value = &quot;Testing AI connectivity...&quot;&#10;&#10;            try {&#10;                // Simple test with a basic text file simulation&#10;                val testContent = &quot;This is a test document for AI processing.&quot;&#10;                val summary = notesRepository.generateAISummary(testContent)&#10;&#10;                if (summary.isNotBlank()) {&#10;                    _testResult.value = &quot; AI connection successful&quot;&#10;                } else {&#10;                    _testResult.value = &quot; AI connection failed&quot;&#10;                }&#10;            } catch (e: Exception) {&#10;                _testResult.value = &quot; AI test failed: ${e.message}&quot;&#10;            }&#10;&#10;            _isLoading.value = false&#10;        }&#10;    }&#10;&#10;    fun retryProcessing(context: Context, uri: Uri, fileName: String) {&#10;        // Clear previous errors and try again&#10;        clearMessages()&#10;        uploadAndProcessNote(context, uri, fileName)&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.group_7.studysage.ui.viewmodels&#10;&#10;import android.content.Context&#10;import android.net.Uri&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import kotlinx.coroutines.launch&#10;import androidx.compose.runtime.State&#10;import com.group_7.studysage.data.repository.NotesRepository&#10;import com.group_7.studysage.data.repository.Note&#10;import com.group_7.studysage.data.repository.AuthRepository&#10;&#10;class HomeViewModel(&#10;    private val notesRepository: NotesRepository = NotesRepository(),&#10;    private val authRepository: AuthRepository = AuthRepository()&#10;) : ViewModel() {&#10;&#10;    private val _isLoading = mutableStateOf(false)&#10;    val isLoading: State&lt;Boolean&gt; = _isLoading&#10;&#10;    private val _uploadStatus = mutableStateOf&lt;String?&gt;(null)&#10;    val uploadStatus: State&lt;String?&gt; = _uploadStatus&#10;&#10;    private val _errorMessage = mutableStateOf&lt;String?&gt;(null)&#10;    val errorMessage: State&lt;String?&gt; = _errorMessage&#10;&#10;    private val _processedNote = mutableStateOf&lt;Note?&gt;(null)&#10;    val processedNote: State&lt;Note?&gt; = _processedNote&#10;&#10;    private val _recentNotes = mutableStateOf&lt;List&lt;Note&gt;&gt;(emptyList())&#10;    val recentNotes: State&lt;List&lt;Note&gt;&gt; = _recentNotes&#10;&#10;    private val _testResult = mutableStateOf&lt;String?&gt;(null)&#10;    val testResult: State&lt;String?&gt; = _testResult&#10;&#10;    // Fetch user full name from Firebase Firestore&#10;    private val _userFullName = mutableStateOf(&quot;User&quot;)&#10;    val userFullName: State&lt;String&gt; = _userFullName&#10;&#10;    private val _userProfile = mutableStateOf&lt;Map&lt;String, Any&gt;?&gt;(null)&#10;    val userProfile: State&lt;Map&lt;String, Any&gt;?&gt; = _userProfile&#10;&#10;    private val _isLoadingProfile = mutableStateOf(true)&#10;    val isLoadingProfile: State&lt;Boolean&gt; = _isLoadingProfile&#10;&#10;    init {&#10;        loadRecentNotes()&#10;        loadUserProfile()&#10;    }&#10;&#10;    // Load user profile from Firestore&#10;    private fun loadUserProfile() {&#10;        viewModelScope.launch {&#10;            _isLoadingProfile.value = true&#10;            try {&#10;                val profile = authRepository.getUserProfile()&#10;                _userFullName.value = (profile?.get(&quot;name&quot;) as? String) ?: &quot;User&quot;&#10;                _userProfile.value = profile  // Store full profile data&#10;            } catch (e: Exception) {&#10;                _userFullName.value = &quot;User&quot;&#10;                _userProfile.value = null&#10;                _errorMessage.value = &quot;Failed to load profile&quot;&#10;            } finally {&#10;                _isLoadingProfile.value = false&#10;            }&#10;        }&#10;    }&#10;&#10;    // Public method to refresh user name&#10;    fun refreshUserProfile() {&#10;        loadUserProfile()&#10;    }&#10;&#10;    fun uploadAndProcessNote(context: Context, uri: Uri, fileName: String) {&#10;        viewModelScope.launch {&#10;            _isLoading.value = true&#10;            _errorMessage.value = null&#10;            clearMessages()&#10;&#10;            try {&#10;                // Validate file type&#10;                val supportedTypes = listOf(&quot;.pdf&quot;, &quot;.txt&quot;, &quot;.doc&quot;, &quot;.docx&quot;, &quot;.md&quot;, &quot;.rtf&quot;)&#10;                val isSupported = supportedTypes.any { fileName.endsWith(it, ignoreCase = true) }&#10;&#10;                if (!isSupported) {&#10;                    _errorMessage.value = &quot;Unsupported file type. Please upload PDF, TXT, DOC, or DOCX files.&quot;&#10;                    _isLoading.value = false&#10;                    return@launch&#10;                }&#10;&#10;                // Check file size (limit to 10MB). Use `use` so the InputStream is closed after reading.&#10;                val fileSize = context.contentResolver.openInputStream(uri)?.use { it.available() } ?: 0&#10;                if (fileSize &gt; 10 * 1024 * 1024) { // 10MB limit&#10;                    _errorMessage.value = &quot;File too large. Please upload files smaller than 10MB.&quot;&#10;                    _isLoading.value = false&#10;                    return@launch&#10;                }&#10;&#10;                val result = notesRepository.uploadNotesAndProcess(&#10;                    context = context,&#10;                    uri = uri,&#10;                    fileName = fileName,&#10;                    onProgress = { status -&gt;&#10;                        _uploadStatus.value = status&#10;                    }&#10;                )&#10;&#10;                result.onSuccess { note -&gt;&#10;                    _processedNote.value = note&#10;                    _uploadStatus.value = &quot;Document processed successfully!&quot;&#10;                    loadRecentNotes() // Refresh the notes list&#10;                }.onFailure { exception -&gt;&#10;                    val errorMsg = when {&#10;                        exception.message?.contains(&quot;authentication&quot;, ignoreCase = true) == true -&gt;&#10;                            &quot;Please sign in to upload files&quot;&#10;                        exception.message?.contains(&quot;network&quot;, ignoreCase = true) == true -&gt;&#10;                            &quot;Network error. Please check your connection&quot;&#10;                        exception.message?.contains(&quot;API&quot;, ignoreCase = true) == true -&gt;&#10;                            &quot;AI processing temporarily unavailable. Please try again&quot;&#10;                        exception.message?.contains(&quot;PDF&quot;, ignoreCase = true) == true -&gt;&#10;                            &quot;PDF processing failed. Please try a different file&quot;&#10;                        else -&gt; &quot;Error processing file: ${exception.message}&quot;&#10;                    }&#10;                    _errorMessage.value = errorMsg&#10;                }&#10;&#10;            } catch (e: Exception) {&#10;                _errorMessage.value = &quot;Unexpected error: ${e.message}&quot;&#10;            }&#10;&#10;            _isLoading.value = false&#10;        }&#10;    }&#10;&#10;    private fun loadRecentNotes() {&#10;        viewModelScope.launch {&#10;            try {&#10;                val notes = notesRepository.getUserNotes()&#10;                _recentNotes.value = notes.take(5) // Show only last 5 notes&#10;            } catch (e: Exception) {&#10;                // Handle error silently for now, or show a subtle error&#10;                _errorMessage.value = &quot;Failed to load recent notes&quot;&#10;            }&#10;        }&#10;    }&#10;&#10;    fun refreshNotes() {&#10;        loadRecentNotes()&#10;    }&#10;&#10;    fun clearMessages() {&#10;        _uploadStatus.value = null&#10;        _errorMessage.value = null&#10;    }&#10;&#10;    fun clearProcessedNote() {&#10;        _processedNote.value = null&#10;    }&#10;&#10;    fun clearError() {&#10;        _errorMessage.value = null&#10;    }&#10;&#10;    // Test connectivity methods (optional)&#10;    fun testAIConnection() {&#10;        viewModelScope.launch {&#10;            _isLoading.value = true&#10;            _testResult.value = &quot;Testing AI connectivity...&quot;&#10;&#10;            try {&#10;                // Simple test with a basic text file simulation&#10;                val testContent = &quot;This is a test document for AI processing.&quot;&#10;                val summary = notesRepository.generateAISummary(testContent)&#10;&#10;                if (summary.isNotBlank()) {&#10;                    _testResult.value = &quot; AI connection successful&quot;&#10;                } else {&#10;                    _testResult.value = &quot; AI connection failed&quot;&#10;                }&#10;            } catch (e: Exception) {&#10;                _testResult.value = &quot; AI test failed: ${e.message}&quot;&#10;            }&#10;&#10;            _isLoading.value = false&#10;        }&#10;    }&#10;&#10;    fun retryProcessing(context: Context, uri: Uri, fileName: String) {&#10;        // Clear previous errors and try again&#10;        clearMessages()&#10;        uploadAndProcessNote(context, uri, fileName)&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>